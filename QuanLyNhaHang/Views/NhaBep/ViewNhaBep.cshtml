@using System.Net.NetworkInformation
@using System.Security.Claims

@{
    QuanLyNhaHangContext context = new QuanLyNhaHangContext();
  
    ThucDon getTD(int? id)
    {
        ThucDon nv = context.ThucDon.Find(id);
        if (nv != null) return nv;
        else return new ThucDon();
    }
   
    List<ChiTietHoaDon> getListCTHD()
    {
        return context.ChiTietHoaDon.Include(x=>x.IdhdNavigation.IdbanNavigation).Where(x => x.Tgbep == null).ToList();
    }
    List<ChiTietHoaDon> getListCTHD1()
    {
        return context.ChiTietHoaDon.Include(x => x.IdhdNavigation.IdbanNavigation).Where(x => x.Tgbep != null && x.TghoanThanh==null).ToList();
    }
  

}

<div class="row" style="width:100%">
    <!-- simple table -->
    <div class="col-md-6 my-4">
        <div class="card shadow">
            <div class="card-body">
                <h5 class="card-title">Simple Table</h5>
                <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                <table class="table table-hover table-bordered text-center display nowrapr TableTGBEP" id="TableTGBEP">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Company</th>
                            <th>Address</th>
                            <th>Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyNB">
                        @{
                            int i = 0;
                        }
                        @foreach (ChiTietHoaDon item in getListCTHD())
                        {
                            i++;
                            <tr>
                                <td>@i</td>
                                <td class="idcthdNB">@item.Idcthd</td>
                                <td><strong>@getTD(@item.Idtd).Ten</strong></td>
                                <td>@item.IdhdNavigation.IdbanNavigation.TenBan</td>
                                @if (item.TrangThaiOrder == true)
                                {
                                    <td class="trangthaicthd">Khách đang sửa yêu cầu</td>

                                }
                                else
                                {
                                    <td class="trangthaicthd"></td>

                                }
                                <td>@item.Sl</td>
                                @if (item.TrangThaiOrder == true)
                                {

                                    <td>
                                        <button class="xacnhan btn btn-primary" disabled>Xác nhận</button>
                                    </td>
                                }
                                else
                                {
                                    <td class="xacnhan2">
                                        <button id="xacnhan1" class="btn btn-primary" value="@item.Idcthd">Xác nhận</button>
                                    </td>


                                });
                                }
                            </tr>
                        }

                    </tbody>
                </table>
            </div>
        </div>
    </div> 
    <div class="col-md-6 my-4">
        <div class="card shadow">
            <div class="card-body">
                <h5 class="card-title">Bordered table</h5>
                <p class="card-text">Add .table-bordered for borders on all sides of the table and cells.</p>
                <table class="table table-bordered table-hover mb-0" id="TableTGHoanThanh">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Company</th>
                            <th>Address</th>
                            <th>Date</th>
                            <th>Activate</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            int j = 0;
                        }
                        @foreach (ChiTietHoaDon item in getListCTHD1())
                        {
                            j++;

                            <tr>
                                <td>@j</td>
                                <td><strong>@getTD(@item.Idtd).Ten</strong></td>
                                <td>@item.IdhdNavigation.IdbanNavigation.TenBan</td>
                                <td>901-6206 Cras Av.</td>
                                <td>Apr 24, 2019</td>
                                <td class="tdtght">
                                    <button id="btntght" class="btn btn-primary" value="@item.Idcthd">Xác nhận</button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div> <!-- Bordered table -->
</div> <!-- end section -->


    <script>

    




        $('#dataTable-1').DataTable(
            {
                autoWidth: true,
                "lengthMenu": [
                    [16, 32, 64, -1],
                    [16, 32, 64, "All"]
                ]
            });
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-56159088-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

   


    //    $(function () {
    //        $("#TableTGBEP").on("click", ".xacnhan2", function () {
    //            var ipmac = $('#IDMAC').val();
    //        var id = $(this).find('#xacnhan1').val();

    //            var thiss = $(this);

    //            $.ajax({
    //                type: "post",
    //                url: "/XacNhanMon",
    //                data: "id=" + id,
    //                success: function (result) {
    //                $("#TableTGBEP").load(location.href + " #TableTGBEP>*", function () {
    //                 });
    //                $("#TableTGHoanThanh").load(location.href + " #TableTGHoanThanh>*", function () {
    //                });
    //                },
    //                error: function () {
    //                    alert("Fail");
    //                }
    //            });
    //        });
    //})
       
    </script>





